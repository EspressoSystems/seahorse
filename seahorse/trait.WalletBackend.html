<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The interface required by the wallet from a specific network&#x2F;ledger implementation."><meta name="keywords" content="rust, rustlang, rust-lang, WalletBackend"><title>WalletBackend in seahorse - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../seahorse/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Trait WalletBackend</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#associated-types">Associated Types</a></h3><div class="sidebar-links"><a href="#associatedtype.EventStream">EventStream</a><a href="#associatedtype.Storage">Storage</a></div><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><div class="sidebar-links"><a href="#tymethod.create">create</a><a href="#tymethod.get_nullifier_proof">get_nullifier_proof</a><a href="#tymethod.get_public_key">get_public_key</a><a href="#tymethod.key_stream">key_stream</a><a href="#tymethod.register_user_key">register_user_key</a><a href="#tymethod.storage">storage</a><a href="#tymethod.submit">submit</a><a href="#tymethod.subscribe">subscribe</a></div><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><div class="sidebar-links"><a href="#method.finalize">finalize</a><a href="#method.load">load</a><a href="#method.store">store</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location">Other items in<br><a href="index.html">seahorse</a></h2><div id="sidebar-vars" data-name="WalletBackend" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="index.html">seahorse</a>::<wbr><a class="trait" href="#">WalletBackend</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/seahorse/lib.rs.html#528-661" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust trait"><code>pub trait WalletBackend&lt;'a, L:&nbsp;Ledger&gt;: <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> {
    type <a href="#associatedtype.EventStream" class="type">EventStream</a>: 'a + Stream&lt;Item = <a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">(</a><a class="enum" href="events/enum.LedgerEvent.html" title="enum seahorse::events::LedgerEvent">LedgerEvent</a>&lt;L&gt;, <a class="enum" href="events/enum.EventSource.html" title="enum seahorse::events::EventSource">EventSource</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">)</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>;
    type <a href="#associatedtype.Storage" class="type">Storage</a>: <a class="trait" href="trait.WalletStorage.html" title="trait seahorse::WalletStorage">WalletStorage</a>&lt;'a, L&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>;
    fn <a href="#tymethod.storage" class="fnname">storage</a>&lt;'l, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'l mut self<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = MutexGuard&lt;'l, Self::<a class="type" href="trait.WalletBackend.html#associatedtype.Storage" title="type seahorse::WalletBackend::Storage">Storage</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'l: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.key_stream" class="fnname">key_stream</a>(&amp;self) -&gt; <a class="struct" href="hd/struct.KeyTree.html" title="struct seahorse::hd::KeyTree">KeyTree</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.create" class="fnname">create</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.WalletState.html" title="struct seahorse::WalletState">WalletState</a>&lt;'a, L&gt;, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.subscribe" class="fnname">subscribe</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="events/struct.EventIndex.html" title="struct seahorse::events::EventIndex">EventIndex</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="events/struct.EventIndex.html" title="struct seahorse::events::EventIndex">EventIndex</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = Self::<a class="type" href="trait.WalletBackend.html#associatedtype.EventStream" title="type seahorse::WalletBackend::EventStream">EventStream</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_public_key" class="fnname">get_public_key</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;address: &amp;'life1 UserAddress<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;UserPubKey, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.register_user_key" class="fnname">register_user_key</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pub_key: &amp;'life1 UserKeyPair<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.get_nullifier_proof" class="fnname">get_nullifier_proof</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nullifiers: &amp;'life1 mut NullifierSet&lt;L&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nullifier: Nullifier<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">(</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.bool.html">bool</a>, NullifierProof&lt;L&gt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">)</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.submit" class="fnname">submit</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;note: Transaction&lt;L&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info: <a class="struct" href="txn_builder/struct.TransactionInfo.html" title="struct seahorse::txn_builder::TransactionInfo">TransactionInfo</a>&lt;L&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>;

    fn <a href="#method.load" class="fnname">load</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.WalletState.html" title="struct seahorse::WalletState">WalletState</a>&lt;'a, L&gt;, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>,
    { ... }
<div class="item-spacer"></div>    fn <a href="#method.store" class="fnname">store</a>&lt;'l, 'async_trait, F, Fut&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'l mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update: F<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.StorageTransaction.html" title="struct seahorse::StorageTransaction">StorageTransaction</a>&lt;'a, 'l, L, Self&gt;) -&gt; Fut,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fut: <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.StorageTransaction.html" title="struct seahorse::StorageTransaction">StorageTransaction</a>&lt;'a, 'l, L, Self&gt;, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'l: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fut: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>,
    { ... }
<div class="item-spacer"></div>    fn <a href="#method.finalize" class="fnname">finalize</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_txn: <a class="struct" href="txn_builder/struct.PendingTransaction.html" title="struct seahorse::txn_builder::PendingTransaction">PendingTransaction</a>&lt;L&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_txn_id: <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">(</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.u64.html">u64</a>, <a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.u64.html">u64</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">)</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L: 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait</span>,
    { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The interface required by the wallet from a specific network/ledger implementation.</p>
<p>This trait is the adaptor for ledger-specific plugins into the ledger-agnostic <a href="struct.Wallet.html" title="Wallet">Wallet</a>
implementation. It provides an interface for the ledger-agnostic wallet to communicate with
remote network participants for a particular ledger. Implementing this trait for your specific
ledger enables the use of the full generic <a href="struct.Wallet.html" title="Wallet">Wallet</a> interface with your ledger.</p>
</div></details><h2 id="associated-types" class="small-section-header">Associated Types<a href="#associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="associatedtype.EventStream" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#541" title="goto source code">[src]</a></div><h4 class="code-header">type <a href="#associatedtype.EventStream" class="type">EventStream</a>: 'a + Stream&lt;Item = <a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">(</a><a class="enum" href="events/enum.LedgerEvent.html" title="enum seahorse::events::LedgerEvent">LedgerEvent</a>&lt;L&gt;, <a class="enum" href="events/enum.EventSource.html" title="enum seahorse::events::EventSource">EventSource</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">)</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a></h4></div></summary><div class="docblock"><p>Notifications about ledger state changes.</p>
<p>The wallet must be able to subscribe to a stream of events from the backend. These events
occur whenever the ledger state changes, including new blocks being committed and owner
memos being published. The backend may also include events when blocks are rejected. This is
not required, but it can help the wallet report failures more quickly (if a rejection is not
reported, the rejected transaction will eventually be considered timed out).</p>
<p>Each event yielded by the stream must be tagged with an <a href="events/enum.EventSource.html" title="EventSource">EventSource</a> indicating where the
event came from. Implementations of <a href="trait.WalletBackend.html" title="WalletBackend">WalletBackend</a> may provide events from multiple sources
(for example, block events from a network query service and memo events from a centralized
memo store) or they may aggregate all events into a single stream from a single source.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="associatedtype.Storage" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#544" title="goto source code">[src]</a></div><h4 class="code-header">type <a href="#associatedtype.Storage" class="type">Storage</a>: <a class="trait" href="trait.WalletStorage.html" title="trait seahorse::WalletStorage">WalletStorage</a>&lt;'a, L&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a></h4></div></summary><div class="docblock"><p>The storage layer used by this implementation.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.storage" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#560" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.storage" class="fnname">storage</a>&lt;'l, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'l mut self<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = MutexGuard&lt;'l, Self::<a class="type" href="trait.WalletBackend.html#associatedtype.Storage" title="type seahorse::WalletBackend::Storage">Storage</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'l: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Access the persistent storage layer.</p>
<p>The interface is specified this way, with the main storage interface in a separate trait and
an accessor function here, to allow implementations of <a href="trait.WalletBackend.html" title="WalletBackend">WalletBackend</a> to split the storage
layer from the networking layer, since the two concerns are generally separate.</p>
<p>Note that the return type of this function requires the implementation to guard the storage
layer with a mutex, even if it is not internally shared between threads. This is meant to
allow shared access to the storage layer internally, but not to require it. A better
interface would be to have an associated type
<code>type&lt;'l&gt; StorageRef: 'l +  Deref&lt;Target = Self::Storage&gt; + DerefMut</code>
This could be [MutexGuard], [async_std::sync::RwLockWriteGuard], or just
<code>&amp;mut Self::Storage</code>, depending on the needs of the implementation. This should be cleaned
up if and when GATs stabilize.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.key_stream" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#609" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.key_stream" class="fnname">key_stream</a>(&amp;self) -&gt; <a class="struct" href="hd/struct.KeyTree.html" title="struct seahorse::hd::KeyTree">KeyTree</a></h4></div></summary><div class="docblock"><p>Get the HD key tree which the wallet should use to generate keys.</p>
<p>This should be configured when the wallet is created, for example, by deriving a key tree
from a mnemonic phrase.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.create" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#616" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.create" class="fnname">create</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.WalletState.html" title="struct seahorse::WalletState">WalletState</a>&lt;'a, L&gt;, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Create a new wallet.</p>
<p>This method should query the current state of the network (or at least some past state) and
create a <a href="struct.WalletState.html" title="WalletState">WalletState</a> consistent with that state. It must also persist the initial state by
interacting with the storage layer directly.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.subscribe" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#619" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.subscribe" class="fnname">subscribe</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;from: <a class="struct" href="events/struct.EventIndex.html" title="struct seahorse::events::EventIndex">EventIndex</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;to: <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="events/struct.EventIndex.html" title="struct seahorse::events::EventIndex">EventIndex</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = Self::<a class="type" href="trait.WalletBackend.html#associatedtype.EventStream" title="type seahorse::WalletBackend::EventStream">EventStream</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Subscribe to the asynchronous ledgerevent stream.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_public_key" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#626" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.get_public_key" class="fnname">get_public_key</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;address: &amp;'life1 UserAddress<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;UserPubKey, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Find the public encryption key associated with the given address.</p>
<p>Users in CAP are identified by addresses, but sending to a user also requires access to
their public encryption key, for encrypting owner memos. This information must be published
in some way, and accessed by the backend in this method.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.register_user_key" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#629" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.register_user_key" class="fnname">register_user_key</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;pub_key: &amp;'life1 UserKeyPair<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Publish an encryption key so that other wallets can access it using <a href="trait.WalletBackend.html#tymethod.get_public_key" title="WalletBackend::get_public_key">WalletBackend::get_public_key</a>.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_nullifier_proof" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#637-641" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.get_nullifier_proof" class="fnname">get_nullifier_proof</a>&lt;'life0, 'life1, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 self, <br>&nbsp;&nbsp;&nbsp;&nbsp;nullifiers: &amp;'life1 mut NullifierSet&lt;L&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;nullifier: Nullifier<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">(</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.bool.html">bool</a>, NullifierProof&lt;L&gt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">)</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life1: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Determine whether a nullifier is spent and obtain a proof.</p>
<p><code>nullifiers</code> is a local cache of nullifiers. It may not contain a status or proof for every
relevant nullifier. This function should check if <code>nullifier</code> is represented in
<code>nullifiers</code> and query the network only if it is not. Optionally, this function may add the
proof to the cache after obtaining a proof from the network.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.submit" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#644-648" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#tymethod.submit" class="fnname">submit</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;note: Transaction&lt;L&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;info: <a class="struct" href="txn_builder/struct.TransactionInfo.html" title="struct seahorse::txn_builder::TransactionInfo">TransactionInfo</a>&lt;L&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Submit a transaction to a validator.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="method.load" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#566-576" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.load" class="fnname">load</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.WalletState.html" title="struct seahorse::WalletState">WalletState</a>&lt;'a, L&gt;, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Load a wallet or create a new one.</p>
<p>If a wallet exists in storage, it is loaded. Otherwise, <a href="trait.WalletBackend.html#tymethod.create" title="WalletBackend::create">WalletBackend::create</a> is called to
create a new wallet.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.store" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#593-603" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.store" class="fnname">store</a>&lt;'l, 'async_trait, F, Fut&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'l mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;update: F<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.StorageTransaction.html" title="struct seahorse::StorageTransaction">StorageTransaction</a>&lt;'a, 'l, L, Self&gt;) -&gt; Fut,<br>&nbsp;&nbsp;&nbsp;&nbsp;Fut: <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.StorageTransaction.html" title="struct seahorse::StorageTransaction">StorageTransaction</a>&lt;'a, 'l, L, Self&gt;, <a class="enum" href="enum.WalletError.html" title="enum seahorse::WalletError">WalletError</a>&lt;L&gt;&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;'l: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Fut: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Make a change to the persisted state using a function describing a transaction.</p>
<h1 id="example" class="section-header"><a href="#example">Example</a></h1>
<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="ident">backend</span>.<span class="ident">store</span>(<span class="ident">key_pair</span>, <span class="op">|</span><span class="kw-2">mut</span> <span class="ident">t</span><span class="op">|</span> <span class="kw">async</span> <span class="kw">move</span> {
    <span class="ident">t</span>.<span class="ident">store_snapshot</span>(<span class="ident">wallet_state</span>).<span class="kw">await</span><span class="question-mark">?</span>;
    <span class="comment">// If this store fails, the effects of the previous store will be reverted.</span>
    <span class="ident">t</span>.<span class="ident">store_asset</span>(<span class="ident">wallet_state</span>, <span class="ident">asset</span>).<span class="kw">await</span><span class="question-mark">?</span>;
    <span class="comment">// Use `t.backend` to access other backend functions during the transaction. Any</span>
    <span class="comment">// failures here will revert all previous stores.</span>
    <span class="ident">t</span>.<span class="ident">backend</span>.<span class="ident">do_something</span>().<span class="kw">await</span><span class="question-mark">?</span>;
    <span class="prelude-val">Ok</span>(<span class="ident">t</span>)
}).<span class="kw">await</span><span class="question-mark">?</span>;</code></pre></div>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.finalize" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/seahorse/lib.rs.html#656-660" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.finalize" class="fnname">finalize</a>&lt;'life0, 'async_trait&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'life0 mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;_txn: <a class="struct" href="txn_builder/struct.PendingTransaction.html" title="struct seahorse::txn_builder::PendingTransaction">PendingTransaction</a>&lt;L&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;_txn_id: <a class="enum" href="https://doc.rust-lang.org/1.56.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">(</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.u64.html">u64</a>, <a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.u64.html">u64</a><a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.tuple.html">)</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.56.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.56.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/1.56.1/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.56.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;L: 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;'life0: 'async_trait,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: 'async_trait,&nbsp;</span></h4></div></summary><div class="docblock"><p>Record a finalized transaction.</p>
<p>If successful, <code>txn_id</code> contains the block ID and index of the committed transaction.</p>
<p>This function is optional and does nothing by default. The backend can override it to
perform cleanup or post-processing on completed transactions.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><script type="text/javascript" src="../implementors/seahorse/trait.WalletBackend.js" async></script></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="seahorse" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>